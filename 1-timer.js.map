{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst startBtn = document.querySelector('button');\nstartBtn.disabled = true;\n\nconst dateTimePicker = document.querySelector('#datetime-picker');\n\nlet userSelectedDate = null;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n\n    if (isDateInThePast(userSelectedDate)) {\n      displayError();\n      startBtn.disabled = true;\n\n      return;\n    }\n\n    startBtn.disabled = false;\n    timer.deadline = userSelectedDate;\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nconst timer = {\n  deadline: new Date('2025-10-10'),\n  elements: {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n  },\n  intervalId: null,\n  start() {\n    this.stop();\n    this.intervalId = setInterval(() => {\n      const diff = this.deadline - new Date();\n      if (diff <= 0) {\n        this.updateElements(0, 0, 0, 0); // Обновляем элементы до нуля\n        this.stop();\n        dateTimePicker.disabled = false;\n        console.log('Timer has stopped!');\n        return;\n      }\n\n      const { days, hours, minutes, seconds } = convertMs(diff);\n      this.updateElements(days, hours, minutes, seconds);\n    }, 1000);\n\n    dateTimePicker.disabled = true;\n    startBtn.disabled = true;\n  },\n  updateElements(days, hours, minutes, seconds) {\n    if (this.elements.days) this.elements.days.textContent = pad(days);\n    if (this.elements.hours) this.elements.hours.textContent = pad(hours);\n    if (this.elements.minutes) this.elements.minutes.textContent = pad(minutes);\n    if (this.elements.seconds) this.elements.seconds.textContent = pad(seconds);\n  },\n  stop() {\n    if (this.intervalId === null) return;\n\n    clearInterval(this.intervalId);\n  },\n  toggleStartButton(isEnabled) {\n    startBtn.disabled = !isEnabled;\n  },\n};\n\nstartBtn.addEventListener('click', handleTimerStart);\n\nfunction handleTimerStart() {\n  if (!userSelectedDate || isDateInThePast(userSelectedDate)) {\n    displayError();\n    return;\n  }\n\n  timer.start();\n}\n\nfunction pad(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction isDateInThePast(date) {\n  return date < new Date();\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction displayError() {\n  iziToast.error({\n    message: 'Please choose a date in the future',\n    position: 'topRight',\n  });\n}\n"],"names":["startBtn","dateTimePicker","userSelectedDate","options","selectedDates","isDateInThePast","displayError","timer","flatpickr","diff","days","hours","minutes","seconds","convertMs","pad","isEnabled","handleTimerStart","value","date","ms","iziToast"],"mappings":"+IAKA,MAAMA,EAAW,SAAS,cAAc,QAAQ,EAChDA,EAAS,SAAW,GAEpB,MAAMC,EAAiB,SAAS,cAAc,kBAAkB,EAEhE,IAAIC,EAAmB,KAEvB,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAGrB,GAFAF,EAAmBE,EAAc,CAAC,EAE9BC,EAAgBH,CAAgB,EAAG,CACrCI,IACAN,EAAS,SAAW,GAEpB,MACD,CAEDA,EAAS,SAAW,GACpBO,EAAM,SAAWL,CAClB,CACH,EAEAM,EAAU,mBAAoBL,CAAO,EAErC,MAAMI,EAAQ,CACZ,SAAU,IAAI,KAAK,YAAY,EAC/B,SAAU,CACR,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACjD,EACD,WAAY,KACZ,OAAQ,CACN,KAAK,KAAI,EACT,KAAK,WAAa,YAAY,IAAM,CAClC,MAAME,EAAO,KAAK,SAAW,IAAI,KACjC,GAAIA,GAAQ,EAAG,CACb,KAAK,eAAe,EAAG,EAAG,EAAG,CAAC,EAC9B,KAAK,KAAI,EACTR,EAAe,SAAW,GAC1B,QAAQ,IAAI,oBAAoB,EAChC,MACD,CAED,KAAM,CAAE,KAAAS,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAI,EACxD,KAAK,eAAeC,EAAMC,EAAOC,EAASC,CAAO,CAClD,EAAE,GAAI,EAEPZ,EAAe,SAAW,GAC1BD,EAAS,SAAW,EACrB,EACD,eAAeU,EAAMC,EAAOC,EAASC,EAAS,CACxC,KAAK,SAAS,OAAM,KAAK,SAAS,KAAK,YAAcE,EAAIL,CAAI,GAC7D,KAAK,SAAS,QAAO,KAAK,SAAS,MAAM,YAAcK,EAAIJ,CAAK,GAChE,KAAK,SAAS,UAAS,KAAK,SAAS,QAAQ,YAAcI,EAAIH,CAAO,GACtE,KAAK,SAAS,UAAS,KAAK,SAAS,QAAQ,YAAcG,EAAIF,CAAO,EAC3E,EACD,MAAO,CACD,KAAK,aAAe,MAExB,cAAc,KAAK,UAAU,CAC9B,EACD,kBAAkBG,EAAW,CAC3BhB,EAAS,SAAW,CAACgB,CACtB,CACH,EAEAhB,EAAS,iBAAiB,QAASiB,CAAgB,EAEnD,SAASA,GAAmB,CAC1B,GAAI,CAACf,GAAoBG,EAAgBH,CAAgB,EAAG,CAC1DI,IACA,MACD,CAEDC,EAAM,MAAK,CACb,CAEA,SAASQ,EAAIG,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASb,EAAgBc,EAAM,CAC7B,OAAOA,EAAO,IAAI,IACpB,CAEA,SAASL,EAAUM,EAAI,CAOrB,MAAMV,EAAO,KAAK,MAAMU,EAAK,KAAG,EAC1BT,EAAQ,KAAK,MAAOS,EAAK,MAAO,IAAI,EACpCR,EAAU,KAAK,MAAQQ,EAAK,MAAO,KAAQ,GAAM,EACjDP,EAAU,KAAK,MAASO,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASP,GAAe,CACtBe,EAAS,MAAM,CACb,QAAS,qCACT,SAAU,UACd,CAAG,CACH"}